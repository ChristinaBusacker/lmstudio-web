<div class="runs">
  @if (isLoading) {
    <div class="runs__empty">Loadingâ€¦</div>
  } @else if (!runs.length) {
    <div class="runs__empty">No runs yet.</div>
  } @else {
    <ul class="runs__list">
      @for (r of runs; track trackById($index, r)) {
        <li
          class="runs__item"
          [class.selected]="r.id === selectedRunId"
          (click)="selectRun.emit(r.id)"
        >
          <div class="runs__top">
            <div class="runs__status">{{ r.status }}</div>
            <div class="runs__controls">
              @if (r.status === 'running' || r.status === 'queued') {
                <button (click)="pause(r)">
                  <app-icon name="pause-line" />
                </button>
              }
              @if (r.status === 'paused') {
                <button (click)="resume(r)">
                  <app-icon name="play-line" />
                </button>
              }
              @if (r.status !== 'completed' && r.status !== 'failed' && r.status !== 'canceled') {
                <button (click)="cancel(r)">
                  <app-icon name="stop-fill" />
                </button>
              }
              <div class="runs__time">{{ r.createdAt | date: 'shortTime' }}</div>
            </div>
          </div>

          @if (r.isActive) {
            <div class="runs__progress">
              <div class="runs__progressBar" aria-label="Run in progress">
                <div class="runs__progressIndeterminate"></div>
              </div>
            </div>
          }

          @if (r.error) {
            <div class="runs__error" title="{{ r.error }}">{{ r.error }}</div>
          }
        </li>
      }
    </ul>
  }
</div>
