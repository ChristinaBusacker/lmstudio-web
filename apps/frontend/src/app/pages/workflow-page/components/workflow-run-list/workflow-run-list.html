<div class="runs">

  @if (isLoading) {
    <div class="runs__empty">Loadingâ€¦</div>
  } @else if (!runs.length) {
    <div class="runs__empty">No runs yet.</div>
  } @else {
    <ul class="runs__list">
      @for (r of runs; track trackById($index, r)) {
        <li
          class="runs__item"
          [class.selected]="r.id === selectedRunId"
          (click)="selectRun.emit(r.id)"
        >
          <div class="runs__top">
            <div class="runs__status">{{ r.status }}</div>
            <div class="runs__time">{{ r.createdAt | date: 'shortTime' }}</div>
          </div>

          @if (r.isActive && r.progress !== null) {
            <div class="runs__progress">
              <div class="runs__progressBar">
                <div class="runs__progressFill" [style.width.%]="percent(r.progress)"></div>
              </div>
              <div class="runs__progressText">{{ percent(r.progress) }}%</div>
            </div>
          }

          @if (r.error) {
            <div class="runs__error" title="{{ r.error }}">{{ r.error }}</div>
          }
        </li>
      }
    </ul>
  }
</div>
